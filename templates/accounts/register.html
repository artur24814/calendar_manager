<!DOCTYPE html>
<html lang="en">
{% load static %}
{% load widget_tweaks %}
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Login</title>
        <link href="{% static 'css/style-accounts.css'%}" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    </head>
    <body class="bg-primary">
        <div id="layoutAuthentication">
            <div id="layoutAuthentication_content">
                <main>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-7">
                                <div class="card shadow-lg border-0 rounded-lg mt-5">
                                    <div class="card-header"><h3 class="text-center font-weight-light my-4">Nowy Account</h3></div>
                                    <div class="card-body">
                                        <form method="post">{% csrf_token %}
                                           {% if form.errors %}
                                            {% for field in form %}
                                                {% for error in field.errors %}
                                                    <div class="alert alert-danger">
                                                        <strong>{{ error|escape }}</strong>
                                                    </div>
                                                {% endfor %}
                                            {% endfor %}
                                            {% for error in form.non_field_errors %}
                                                <div class="alert alert-danger">
                                                    <strong>{{ error|escape }}</strong>
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                        <div id="check-password">
                                            <div class="form-floating mb-3">
                                                  {%  render_field form.first_name class="form-control" placeholder='Imie lekarza'%}
                                                  <label for="{{ form.first_name.id_for_label }}">Imie lekarza</label>
                                            </div>
                                            <div class="form-floating mb-3">
                                                  {%  render_field form.last_name class="form-control" placeholder='Imie i nazwisko lekarza'%}
                                                  <label for="{{ form.last_name.id_for_label }}">Nazwisko lekarza</label>
                                            </div>
                                        <div id="error-name" style="color: red;"></div>
                                            <div class="form-floating mb-3">
                                                  {%  render_field form.username class="form-control" placeholder='Twój login' hx-get="/check-existing-name/" hx-target="#error-name" hx-trigger="keyup change" %}
                                                  <label for="{{ form.username.id_for_label }}">Twój login</label>
                                            <p style="color: #777777; font-size: 15px;">
                                                150 znaków lub mniej. Tylko litery, cyfry i @/./+/-/_ .</p>
                                            </div>

                                                {% if form.password1.errors %}
                                                    {% for error in form.password1.errors %}
                                                              <strong>{{ error|escape }}</strong>
                                                    {% endfor %}
                                                 {% endif %}
                                        <div id="error-password" style="color: red"></div>
                                        <div class="form-floating mb-3">
                                                   {%  render_field form.password1 class="form-control" placeholder='Haslo' %}
                                                   <label for="{{ form.password.id_for_label }}">Haslo</label>
                                                <ul style="color: #777777; font-size: 15px;">
                                                    <li>Twoje hasło nie może być zbyt podobne do innych Twoich danych osobowych</li>
                                                    <li>Hasło musi zawierać co najmniej 6 znaków</li>
                                                    <li>Twoje hasło nie może być powszechnie używanym hasłem</li>
                                                    <li>Twoje hasło nie może być całkowicie numeryczne</li>
                                                </ul>
                                                </div>
                                        </div>
                                                <div class="form-floating mb-3">
                                                {% if form.password2.errors %}
                                                              {% for error in form.password1.errors %}
                                                              <strong>{{ error }}</strong>
                                                    {% endfor %}
                                                 {% endif %}
                                                   {%  render_field form.password2 class="form-control" placeholder='Haslo2'%}
                                                   <label for="{{ form.password2.id_for_label }}">Haslo2</label>
                                                 <p style="color: #777777; font-size: 15px;">Wprowadź to samo hasło co poprzednio, w celu weryfikacji.</p>
                                                </div>
                                            <div class="mt-4 mb-0">
                                                <div class="d-grid"><button type="submit" class="btn btn-primary" >Stwórz Account</button></div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="card-footer text-center py-3">
                                        <div class="small"><a href="{% url 'accounts:login' %}">Już masz account? Zaloguj się</a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
            <div id="layoutAuthentication_footer">
                <footer class="py-4 bg-light mt-auto">
                    <div class="container-fluid px-4">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">MESX/ISC/09/18 - Karta Obserwacji Klinicznej v. 3.1 z dn. 7.03. 2019</div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    </body>
</html>
